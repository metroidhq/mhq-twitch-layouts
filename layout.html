<!DOCTYPE html>
<html>
  <head>
    <title>Layout Overlay</title>
    <link rel="stylesheet" type="text/css" href="styles/main.css" />
    <link rel="stylesheet" type="text/css" href="styles/layout.css" />
    <script type="text/javascript" src="scripts/functions.js"></script>
    <script type="text/javascript" src="scripts/numeral.min.js"></script>
    <script type="text/javascript" src="scripts/countdown.min.js"></script>
  </head>

  <body>
    <div id="container">
      <div id="background">
        <img id="social-background" src="images/samus.png" />
      </div>

      <div id="title-container">
        <span id="game-title"></span>
      </div>

      <div id="stand-by-box">
        <div id="stand-by-logo"></div>
        <div id="stand-by-overlay"></div>
        <div id="stand-by-text">
          <div id="stand-by-title"></div>
          <div id="stand-by-subtitle"></div>
        </div>
      </div>

      <div id="host1" class="host-box"></div>
      <div id="host2" class="host-box"></div>
      <div id="host3" class="host-box"></div>
      <div id="host4" class="host-box"></div>

      <div id="info-boxes">
        <div id="latest-follower-box" class="info-box active">
          <span class="label">Latest Follower</span>
          <div id="latest-follower">???</div>
        </div>

        <!-- <div id="latest-subscriber-box" class="info-box">
          <span class="label">Latest Subscriber</span>
          <div id="latest-subscriber">???</div>
        </div> -->

        <div id="website-box" class="info-box">
          <span class="label">Website</span>
          <div id="website">metroidhq.com</div>
        </div>
      </div>

      <iframe id="chat" src="https://streamlabs.com/widgets/chat-box/v1/CE59A1D8FEF31BEC37ED" width="0" height="0"></iframe>
      <iframe id="alerts" src="https://streamlabs.com/alert-box/v3/CE59A1D8FEF31BEC37ED?follows=1&subscriptions=1&donations=1&hosts=1&bits=1&raids=1&redemptions=1&mute=1" width="0" height="0"></iframe>
    </div>

    <script type="text/javascript">
      var params = new URLSearchParams(window.location.search);

      var customStyle = document.createElement('link');
      customStyle.setAttribute('id', 'custom-css');
      customStyle.setAttribute('rel', 'stylesheet');
      customStyle.setAttribute('type', 'text/css');
      customStyle.setAttribute('href', 'styles/layouts/' + (params.get('layout') || 'default') + '.css');
      document.getElementsByTagName('head')[0].appendChild(customStyle);

      if (params.has('countdown')) insertCountdown();
      if (params.has('nochat')) document.getElementById('chat').setAttribute('src', 'index.html');
      if (params.has('standbytitle')) document.getElementById('stand-by-title').textContent = params.get('standbytitle');
      if (params.has('standbysubtitle')) document.getElementById('stand-by-subtitle').textContent = params.get('standbysubtitle');
      if (params.has('gametitle')) document.getElementById('game-title').textContent = params.get('gametitle');
      if (params.has('host1')) document.getElementById('host1').textContent = params.get('host1');
      if (params.has('host2')) document.getElementById('host2').textContent = params.get('host2');
      if (params.has('host3')) document.getElementById('host3').textContent = params.get('host3');
      if (params.has('host4')) document.getElementById('host4').textContent = params.get('host4');

      if (params.get('layout') === 'widescreen' || params.get('layout') === '3ds') {
        document.getElementById('info-boxes').classList.add('spread');
      } else {
        startDataSlideshow();
      }

      getData();
    </script>
  </body>
</html>
